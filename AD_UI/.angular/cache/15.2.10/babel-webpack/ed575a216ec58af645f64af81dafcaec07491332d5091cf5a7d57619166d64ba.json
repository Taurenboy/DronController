{"ast":null,"code":"const Encoder = require('../../encoder');\nconst crc32 = require('../../crc32');\nconst {\n  Types: Compression,\n  COMPRESSION_CODEC_MASK\n} = require('../compression');\n\n/**\n * v1 (supported since 0.10.0)\n * Message => Crc MagicByte Attributes Key Value\n *   Crc => int32\n *   MagicByte => int8\n *   Attributes => int8\n *   Timestamp => int64\n *   Key => bytes\n *   Value => bytes\n */\n\nmodule.exports = ({\n  compression = Compression.None,\n  timestamp = Date.now(),\n  key,\n  value\n}) => {\n  const content = new Encoder().writeInt8(1) // magicByte\n  .writeInt8(compression & COMPRESSION_CODEC_MASK).writeInt64(timestamp).writeBytes(key).writeBytes(value);\n  const crc = crc32(content);\n  return new Encoder().writeInt32(crc).writeEncoder(content);\n};","map":{"version":3,"names":["Encoder","require","crc32","Types","Compression","COMPRESSION_CODEC_MASK","module","exports","compression","None","timestamp","Date","now","key","value","content","writeInt8","writeInt64","writeBytes","crc","writeInt32","writeEncoder"],"sources":["C:/Users/ingev/Documents/Desarrollo/Luna/DronController/AD_UI/node_modules/kafkajs/src/protocol/message/v1/index.js"],"sourcesContent":["const Encoder = require('../../encoder')\nconst crc32 = require('../../crc32')\nconst { Types: Compression, COMPRESSION_CODEC_MASK } = require('../compression')\n\n/**\n * v1 (supported since 0.10.0)\n * Message => Crc MagicByte Attributes Key Value\n *   Crc => int32\n *   MagicByte => int8\n *   Attributes => int8\n *   Timestamp => int64\n *   Key => bytes\n *   Value => bytes\n */\n\nmodule.exports = ({ compression = Compression.None, timestamp = Date.now(), key, value }) => {\n  const content = new Encoder()\n    .writeInt8(1) // magicByte\n    .writeInt8(compression & COMPRESSION_CODEC_MASK)\n    .writeInt64(timestamp)\n    .writeBytes(key)\n    .writeBytes(value)\n\n  const crc = crc32(content)\n  return new Encoder().writeInt32(crc).writeEncoder(content)\n}\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,eAAe,CAAC;AACxC,MAAMC,KAAK,GAAGD,OAAO,CAAC,aAAa,CAAC;AACpC,MAAM;EAAEE,KAAK,EAAEC,WAAW;EAAEC;AAAuB,CAAC,GAAGJ,OAAO,CAAC,gBAAgB,CAAC;;AAEhF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAK,MAAM,CAACC,OAAO,GAAG,CAAC;EAAEC,WAAW,GAAGJ,WAAW,CAACK,IAAI;EAAEC,SAAS,GAAGC,IAAI,CAACC,GAAG,EAAE;EAAEC,GAAG;EAAEC;AAAM,CAAC,KAAK;EAC3F,MAAMC,OAAO,GAAG,IAAIf,OAAO,EAAE,CAC1BgB,SAAS,CAAC,CAAC,CAAC,CAAC;EAAA,CACbA,SAAS,CAACR,WAAW,GAAGH,sBAAsB,CAAC,CAC/CY,UAAU,CAACP,SAAS,CAAC,CACrBQ,UAAU,CAACL,GAAG,CAAC,CACfK,UAAU,CAACJ,KAAK,CAAC;EAEpB,MAAMK,GAAG,GAAGjB,KAAK,CAACa,OAAO,CAAC;EAC1B,OAAO,IAAIf,OAAO,EAAE,CAACoB,UAAU,CAACD,GAAG,CAAC,CAACE,YAAY,CAACN,OAAO,CAAC;AAC5D,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}