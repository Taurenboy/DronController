{"ast":null,"code":"var _asyncToGenerator = require(\"C:/Users/ingev/Documents/Desarrollo/Luna/DronController/AD_UI/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nconst sleep = require('./sleep');\nconst {\n  KafkaJSTimeout\n} = require('../errors');\nmodule.exports = (fn, {\n  delay = 50,\n  maxWait = 10000,\n  timeoutMessage = 'Timeout',\n  ignoreTimeout = false\n} = {}) => {\n  let timeoutId;\n  let totalWait = 0;\n  let fulfilled = false;\n  const checkCondition = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(function* (resolve, reject) {\n      totalWait += delay;\n      if (fulfilled) {\n        return;\n      }\n      yield sleep(delay);\n      try {\n        const result = yield fn(totalWait);\n        if (result) {\n          fulfilled = true;\n          clearTimeout(timeoutId);\n          return resolve(result);\n        }\n        checkCondition(resolve, reject);\n      } catch (e) {\n        fulfilled = true;\n        clearTimeout(timeoutId);\n        reject(e);\n      }\n    });\n    return function checkCondition(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return new Promise((resolve, reject) => {\n    checkCondition(resolve, reject);\n    if (ignoreTimeout) {\n      return;\n    }\n    timeoutId = setTimeout(() => {\n      if (!fulfilled) {\n        fulfilled = true;\n        return reject(new KafkaJSTimeout(timeoutMessage));\n      }\n    }, maxWait);\n  });\n};","map":{"version":3,"names":["sleep","require","KafkaJSTimeout","module","exports","fn","delay","maxWait","timeoutMessage","ignoreTimeout","timeoutId","totalWait","fulfilled","checkCondition","resolve","reject","result","clearTimeout","e","Promise","setTimeout"],"sources":["C:/Users/ingev/Documents/Desarrollo/Luna/DronController/AD_UI/node_modules/kafkajs/src/utils/waitFor.js"],"sourcesContent":["const sleep = require('./sleep')\nconst { KafkaJSTimeout } = require('../errors')\n\nmodule.exports = (\n  fn,\n  { delay = 50, maxWait = 10000, timeoutMessage = 'Timeout', ignoreTimeout = false } = {}\n) => {\n  let timeoutId\n  let totalWait = 0\n  let fulfilled = false\n\n  const checkCondition = async (resolve, reject) => {\n    totalWait += delay\n    if (fulfilled) {\n      return\n    }\n\n    await sleep(delay)\n\n    try {\n      const result = await fn(totalWait)\n      if (result) {\n        fulfilled = true\n        clearTimeout(timeoutId)\n        return resolve(result)\n      }\n\n      checkCondition(resolve, reject)\n    } catch (e) {\n      fulfilled = true\n      clearTimeout(timeoutId)\n      reject(e)\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    checkCondition(resolve, reject)\n\n    if (ignoreTimeout) {\n      return\n    }\n\n    timeoutId = setTimeout(() => {\n      if (!fulfilled) {\n        fulfilled = true\n        return reject(new KafkaJSTimeout(timeoutMessage))\n      }\n    }, maxWait)\n  })\n}\n"],"mappings":";AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,SAAS,CAAC;AAChC,MAAM;EAAEC;AAAe,CAAC,GAAGD,OAAO,CAAC,WAAW,CAAC;AAE/CE,MAAM,CAACC,OAAO,GAAG,CACfC,EAAE,EACF;EAAEC,KAAK,GAAG,EAAE;EAAEC,OAAO,GAAG,KAAK;EAAEC,cAAc,GAAG,SAAS;EAAEC,aAAa,GAAG;AAAM,CAAC,GAAG,CAAC,CAAC,KACpF;EACH,IAAIC,SAAS;EACb,IAAIC,SAAS,GAAG,CAAC;EACjB,IAAIC,SAAS,GAAG,KAAK;EAErB,MAAMC,cAAc;IAAA,6BAAG,WAAOC,OAAO,EAAEC,MAAM,EAAK;MAChDJ,SAAS,IAAIL,KAAK;MAClB,IAAIM,SAAS,EAAE;QACb;MACF;MAEA,MAAMZ,KAAK,CAACM,KAAK,CAAC;MAElB,IAAI;QACF,MAAMU,MAAM,SAASX,EAAE,CAACM,SAAS,CAAC;QAClC,IAAIK,MAAM,EAAE;UACVJ,SAAS,GAAG,IAAI;UAChBK,YAAY,CAACP,SAAS,CAAC;UACvB,OAAOI,OAAO,CAACE,MAAM,CAAC;QACxB;QAEAH,cAAc,CAACC,OAAO,EAAEC,MAAM,CAAC;MACjC,CAAC,CAAC,OAAOG,CAAC,EAAE;QACVN,SAAS,GAAG,IAAI;QAChBK,YAAY,CAACP,SAAS,CAAC;QACvBK,MAAM,CAACG,CAAC,CAAC;MACX;IACF,CAAC;IAAA,gBAtBKL,cAAc;MAAA;IAAA;EAAA,GAsBnB;EAED,OAAO,IAAIM,OAAO,CAAC,CAACL,OAAO,EAAEC,MAAM,KAAK;IACtCF,cAAc,CAACC,OAAO,EAAEC,MAAM,CAAC;IAE/B,IAAIN,aAAa,EAAE;MACjB;IACF;IAEAC,SAAS,GAAGU,UAAU,CAAC,MAAM;MAC3B,IAAI,CAACR,SAAS,EAAE;QACdA,SAAS,GAAG,IAAI;QAChB,OAAOG,MAAM,CAAC,IAAIb,cAAc,CAACM,cAAc,CAAC,CAAC;MACnD;IACF,CAAC,EAAED,OAAO,CAAC;EACb,CAAC,CAAC;AACJ,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}